<div ng-controller="MapCtrl as mapv">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <shifts-left-button></shifts-left-button>
            </div>
            <div class="center" ng-bind="pageTitle"></div>
        </ons-toolbar>

        <leaflet id="map" class="map animated fadeIn"
            lf-center="defaultLocation" layers="layers" markers="markers" height="480px" width="100%"></leaflet>
        <ion-icon class="map-pin ion-location animated bounceInDown"></ion-icon>

        <form class="search-panel animated fadeIn box-shadow">
            <div class="search-panel__field search-panel__field--map search-input border-none">
                <input class="search-panel__input" type="text" placeholder="Enter your pickup address"
                    ng-model="mapv.addressToConvert" ng-keydown="($event.which === 13 || $event.which === 32) && mapv.geoCodeLookup()">
            </div>
        </form>

        <ons-button class="location-finder" ng-click="mapv.panToUserLocation()">
            <ion-icon class="ion-navigate"></ion-icon>
        </ons-button>

        <div class="map-back-button">
            <ons-button class="button--clear margin-top button-cyclinder button--map"
            ng-click="mapv.onSetPickupLocation()">Set pickup location</ons-button>
        </div>

    </ons-page>
</div>
